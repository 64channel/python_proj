#imports section (DO NOT ADD ANY IMPORTS THAT HAVE TO INSTALL)
import urllib.request as request
import os
from time import sleep

#Check to see if the file already exists
def checkexist (file_name):
    checked = os.path.exists(file_name)
    return checked
#Variables documentation
#url_link is the website the user inputs
#link file is what the program downloads
#file name is what you want it to save as, also checks to see if it is already downloaded
#file_content is the url being decoded
#
#Download the file
#uncomment these in the future if the project needs to be used again
#-------------------------------------------------------------------------------
#url_link = input("Enter the url that contains the file you want to download")
#file_name = input("Enter a name for the file you are downloading")
#-------------------------------------------------------------------------------
url_link = 'https://s3.amazonaws.com/tcmg476/http_access_log'
file_name = "http.txt"
if checkexist(file_name):
    print("File already exists. Continuing to calculations")

else:
  try:
      print("Download starting...")
      n=5
      for i in range (0,5):
          sleep (1)
          print(n,"Seconds till start")
           n-=1
      link_file = request.urlopen(url_link)
      file_content = link_file.read().decode('utf-8')
      with open(file_name, 'w') as data:
          data.write(file_content)
      print ("The data has been downloaded, the file name is ", file_name)
      #print(file_content)
  except:
      print("error")
#Retrieve the file path       
filepath = os.path.abspath(file_name)
Datacontent = open(filepath, "r")
print (Datacontent.read())

#Total Requests 
        with open(filepath) as fp:
        line = len(fp.readlines())
        print('Total request', line)

#6 months
        months = 0 
        if "May 1994": 
          month += 1 
        elif "June 1994":
          month +=1
        elif "July 1994": 
          month += 1 
        elif "August 1994": 
          month +=1
        elif "September 1994":
          month +=1
        elif "October 1994":
          month +=1 
          print('Total requests in 6 months:', months)
  
